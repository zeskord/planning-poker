(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{227:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(31),c=a.n(s),i=(a(38),a(8)),u=a(9),o=a(6),l=a(11),h=a(10),p=a(32),m=a(5),k=a.n(m),f=a(12),v=a(4),b=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){var e=void 0;return!this.props.markVisible&this.props.itsMe&void 0!==this.props.mark?e=r.a.createElement(v.Badge,{secondary:!0,pill:!0},this.props.mark):this.props.markVisible&&(e=r.a.createElement(v.Badge,{primary:!0,pill:!0},this.props.mark)),r.a.createElement(v.ListGroup.Item,{display:"flex",justifyContent:"between",align:"items-center",success:void 0!==this.props.mark},this.props.userName,void 0!==e&&e)}}]),a}(n.Component),d=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){return Object(i.a)(this,a),t.call(this,e)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(v.ListGroup,{my:"2"},this.props.users.map((function(t){return r.a.createElement(b,{key:t.id,userName:t.name,mark:t.mark,markVisible:e.props.marksVisible,itsMe:e.props.currentUserName===t.name})})))}}]),a}(n.Component),y=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).logoutClick=n.logoutClick.bind(Object(o.a)(n)),n.fullReset=n.fullReset.bind(Object(o.a)(n)),n}return Object(u.a)(a,[{key:"logoutClick",value:function(){var e=Object(f.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/logOut",e.next=3,fetch("/logOut",{method:"POST"});case 3:this.props.setAuthState({name:void 0},!1);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"fullReset",value:function(){var e=Object(f.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/fullReset",e.next=3,fetch("/fullReset",{method:"POST"});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(v.Navbar,{expand:"lg",light:!0,bg:"light"},r.a.createElement(v.Navbar.Brand,{href:"#"},this.props.userName),r.a.createElement(v.Navbar.Toggler,{target:"#navbarSupportedContent"}),r.a.createElement(v.Collapse,{navbar:!0,id:"navbarSupportedContent"},r.a.createElement(v.Navbar.Nav,{mr:"auto"},r.a.createElement(v.Nav.Item,null,r.a.createElement(v.Nav.Link,{href:"#",onClick:this.logoutClick},"\u0420\u0430\u0437\u043b\u043e\u0433\u0438\u043d\u0438\u0442\u044c\u0441\u044f")),r.a.createElement(v.Nav.Item,null,r.a.createElement(v.Nav.Link,{href:"#",onClick:this.fullReset},"\u041f\u043e\u043b\u043d\u044b\u0439 \u0441\u0431\u0440\u043e\u0441")))))}}]),a}(n.Component),g=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={user:{},users:[],spectators:[],userIDs:[],spectatorIDs:[],marksVisible:!1,mark:void 0},n.tick=n.tick.bind(Object(o.a)(n)),n.markChange=n.markChange.bind(Object(o.a)(n)),n.sendClick=n.sendClick.bind(Object(o.a)(n)),n.openClick=n.openClick.bind(Object(o.a)(n)),n.clearMarksClick=n.clearMarksClick.bind(Object(o.a)(n)),n.markKeyUp=n.markKeyUp.bind(Object(o.a)(n)),n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=Object(f.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/getUserData",e.next=3,fetch("/getUserData");case 3:return t=e.sent,e.next=6,t.json();case 6:return a=e.sent,n={name:a.user,isSpectator:a.isSpectator},this.setState({user:n}),e.next=11,this.tick();case 11:this.intervalID=setInterval(this.tick,5e3);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalID)}},{key:"tick",value:function(){var e=Object(f.a)(k.a.mark((function e(){var t,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/tick",e.next=4,fetch("/tick");case 4:return t=e.sent,e.next=7,t.json();case 7:a=e.sent,this.setState(a),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,this,[[0,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"markChange",value:function(e){this.setState({mark:e.target.value})}},{key:"sendClick",value:function(){var e=Object(f.a)(k.a.mark((function e(t){var a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/sendMark",a={user:this.state.user.name,mark:this.state.mark},e.next=4,fetch("/sendMark",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(a)});case 4:return n=e.sent,e.next=7,n.text();case 7:this.tick();case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"markKeyUp",value:function(){var e=Object(f.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:13===t.keyCode&&this.sendClick(t);case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openClick",value:function(){var e=Object(f.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/showMarks",e.next=3,fetch("/showMarks",{method:"POST"});case 3:this.tick();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"clearMarksClick",value:function(){var e=Object(f.a)(k.a.mark((function e(t){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"/clearMarks",e.next=3,fetch("/clearMarks",{method:"POST"});case 3:this.tick();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(v.BDiv,{bg:"light"},r.a.createElement(y,{userName:this.state.user.name,setAuthState:this.props.setAuthState}),r.a.createElement(v.Container,null,r.a.createElement(v.InputGroup,{lg:!0,my:"2"},r.a.createElement(v.InputGroup.PrependText,null,"\u041e\u0446\u0435\u043d\u043a\u0430"),r.a.createElement(v.Form.Input,{type:"number",onChange:this.markChange,onKeyUp:this.markKeyUp})),r.a.createElement(v.Button,{primary:!0,lg:!0,my:"2",onClick:this.sendClick},"\u041e\u0442\u043f\u0440\u0430\u0432\u0438\u0442\u044c"),r.a.createElement(d,{users:this.state.users,marksVisible:this.state.marksVisible,currentUserName:this.state.user.name}),r.a.createElement(v.BDiv,{my:"2"},r.a.createElement(v.Button,{success:!0,lg:!0,onClick:this.openClick},"\u0412\u0441\u043a\u0440\u044b\u0432\u0430\u0435\u043c\u0441\u044f")),r.a.createElement(v.BDiv,{my:"2"},r.a.createElement(v.Button,{warning:!0,lg:!0,my:"2",onClick:this.clearMarksClick},"\u041e\u0447\u0438\u0441\u0442\u0438\u0442\u044c \u043e\u0446\u0435\u043d\u043a\u0438")))))}}]),a}(n.Component),C=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).state={userName:"",isSpectator:!1},n.loginclick=n.loginclick.bind(Object(o.a)(n)),n.loginKeyUp=n.loginKeyUp.bind(Object(o.a)(n)),n.userNameChange=n.userNameChange.bind(Object(o.a)(n)),n.isSpectatorChange=n.isSpectatorChange.bind(Object(o.a)(n)),n}return Object(u.a)(a,[{key:"loginclick",value:function(){var e=Object(f.a)(k.a.mark((function e(){var t,a,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={userName:this.state.userName,isSpectator:this.state.isSpectator},e.next=3,fetch("/",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},body:JSON.stringify(t)});case 3:return a=e.sent,e.next=6,a.json();case 6:n=e.sent,this.props.setAuthState(n,!0);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loginKeyUp",value:function(e){13===e.keyCode&&this.loginclick()}},{key:"userNameChange",value:function(e){this.setState({userName:e.target.value})}},{key:"isSpectatorChange",value:function(e){this.setState({isSpectator:e.target.value})}},{key:"render",value:function(){return r.a.createElement(v.Container,null,r.a.createElement(v.InputGroup,null,r.a.createElement("label",{htmlFor:"userName"},"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448\u0435 \u0438\u043c\u044f")),r.a.createElement(v.InputGroup,{mb:"3"},r.a.createElement(v.Form.Input,{lg:!0,type:"text",id:"userName",value:this.state.userName,onChange:this.userNameChange,onKeyUp:this.loginKeyUp,placeholder:"\u0418\u043c\u044f \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f"})),r.a.createElement(v.Form.Check,{mb:"3"},r.a.createElement(v.Form.CheckInput,{type:"checkbox",id:"isSpectator",value:this.state.isSpectator,onChange:this.isSpectatorChange}),r.a.createElement(v.Form.CheckLabel,{htmlFor:"isSpectator"},"\u042f \u0442\u043e\u043b\u044c\u043a\u043e \u043f\u043e\u0441\u043c\u043e\u0442\u0440\u0435\u0442\u044c")),r.a.createElement(v.InputGroup,{mb:"3"},r.a.createElement(v.Button,{primary:!0,onClick:this.loginclick},"\u0412\u043e\u0439\u0442\u0438")))}}]),a}(n.Component),O=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var n;Object(i.a)(this,a),n=t.call(this,e);var r=(new p.a).get("user"),s=void 0!==r;return n.state={isAuthenticated:s,isSpectator:s?r.isSpectator:void 0,userName:s?r.name:void 0},n.setAuthState=n.setAuthState.bind(Object(o.a)(n)),n}return Object(u.a)(a,[{key:"setAuthState",value:function(e,t){this.setState({userName:e.name,isAuthenticated:t})}},{key:"render",value:function(){return r.a.createElement(n.Fragment,null,this.state.isAuthenticated?r.a.createElement(g,{setAuthState:this.setAuthState}):r.a.createElement(C,{setAuthState:this.setAuthState}))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},33:function(e,t,a){e.exports=a(227)},38:function(e,t,a){}},[[33,1,2]]]);
//# sourceMappingURL=main.18d791c4.chunk.js.map